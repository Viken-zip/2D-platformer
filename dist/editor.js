(()=>{"use strict";var e={304:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tileSize=t.canvas=void 0;var o=l(806),c=l(971);l(912);var n=l(912);t.canvas=document.getElementById("canvas");var i=t.canvas.getContext("2d");i&&(i.imageSmoothingEnabled=!1);var r=document.getElementById("topBar");document.getElementById("canvasContainer"),t.tileSize=(innerHeight-r.clientHeight)/30,t.canvas.width=1e3*t.tileSize,t.canvas.height=30*t.tileSize,(0,n.initCursor)(t.canvas,i),(0,o.drawGrid)(i,t.tileSize,1e3,30),(0,c.initBlockSelection)()},971:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.cursorClick=t.initBlockSelection=t.selectedTool=t.selectedBlock=void 0;var o=l(489),c=l(806),n=["brick","white_brick"];t.selectedBlock="brick",t.selectedTool="blockPlacer";var i=document.getElementById("eraserBtn"),r=document.getElementById("penBtn"),s=document.getElementById("changeBlockLeft"),a=document.getElementById("changeBlockRight"),d=document.getElementById("selectedBlock");function u(e){e.className.includes("selectedTool")||(e.className+=e.className?" selectedTool":"selectedTool","blockPlacer"==t.selectedTool?r.classList.remove("selectedTool"):"eraser"==t.selectedTool&&i.classList.remove("selectedTool"))}t.initBlockSelection=function(){null==i||i.addEventListener("click",(function(){u(i),t.selectedTool="eraser"})),null==r||r.addEventListener("click",(function(){u(r),t.selectedTool="blockPlacer"})),null==s||s.addEventListener("click",(function(){var e=n.indexOf(t.selectedBlock);console.log(e),t.selectedBlock=e-1>=0?n[e-1]:n[n.length-1],d.src="./sprites/".concat(t.selectedBlock,".png")})),null==a||a.addEventListener("click",(function(){var e=n.indexOf(t.selectedBlock);n.length-1>=e+1?t.selectedBlock=n[e+1]:t.selectedBlock=n[0],d.src="./sprites/".concat(t.selectedBlock,".png")}))},t.cursorClick=function(e,l,n){"blockPlacer"==t.selectedTool?(0,o.newBlock)(e,l,n,t.selectedBlock):"eraser"==t.selectedTool&&((0,o.removeBlock)(l,n),(0,c.redrawGird)(e,l,n))}},489:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.drawBlock=t.newBlock=t.removeBlock=void 0;var o=l(304),c=[],n=function(e,t,l,o,c){this.x=e,this.y=t,this.w=l,this.h=o,this.type=c};function i(e,t){for(var l=0;l<c.length;l++)c[l].x==e&&c[l].y==t&&c.splice(l,1)}function r(e,t,l,c){var n=new Image;n.src="./sprites/".concat(c,".png"),n.onload=function(){null==e||e.drawImage(n,t*o.tileSize,l*o.tileSize,o.tileSize,o.tileSize)}}t.removeBlock=i,t.newBlock=function(e,t,l,o){var s,a=new n(t,l,1,1,o),d=function(e,t){for(var l=0;l<c.length;l++)if(c[l].x==e&&c[l].y==t)return console.log("match!"),{taken:!0,takenBlock:c[l]};return{taken:!1}}(t,l);d.taken?d.taken&&(null===(s=d.takenBlock)||void 0===s?void 0:s.type)!=o&&(console.log("replace"),i(t,l),c.push(a),r(e,t,l,o)):(console.log("non att all"),c.push(a),r(e,t,l,o)),console.log(c)},t.drawBlock=r},806:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.redrawGird=t.drawGrid=void 0;var o=l(304),c=new Image;c.src="./sprites/grid.png",t.drawGrid=function(e,t,l,o){c.onload=function(){for(var n=0;n<o;n++)for(var i=0;i<l;i++)null==e||e.drawImage(c,i*t,n*t,t,t)}},t.redrawGird=function(e,t,l){null==e||e.clearRect(t*o.tileSize,l*o.tileSize,o.tileSize,o.tileSize),e.drawImage(c,t*o.tileSize,l*o.tileSize,o.tileSize,o.tileSize)}},912:(e,t,l)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initCursor=t.cursor=t.Cursor=void 0;var o=l(304),c=l(971),n=function(e,t){this.x=e,this.y=t};t.Cursor=n,t.cursor=new n(0,0),t.initCursor=function(e,l){e.addEventListener("mousedown",(function(){(0,c.cursorClick)(l,t.cursor.x,t.cursor.y)})),e.addEventListener("mousemove",(function(l){var c,n,i=e.getBoundingClientRect(),r=(c=l.pageX-i.left,n=l.pageY-i.top,{x:Math.ceil(c/o.tileSize)-1,y:Math.ceil(n/o.tileSize)-1});t.cursor.x=r.x,t.cursor.y=r.y}))}}},t={};!function l(o){var c=t[o];if(void 0!==c)return c.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,l),n.exports}(304)})();