(()=>{"use strict";var e={304:(e,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.tileSize=o.canvas=void 0;var t=l(806),n=l(971);l(912);var c=l(912),i=l(327);o.canvas=document.getElementById("canvas");var r=o.canvas.getContext("2d");r&&(r.imageSmoothingEnabled=!1);var s=document.getElementById("topBar");document.getElementById("canvasContainer"),o.tileSize=(innerHeight-s.clientHeight)/30,o.canvas.width=1e3*o.tileSize,o.canvas.height=30*o.tileSize,(0,i.initJsonMenu)(),(0,c.initCursor)(o.canvas,r),(0,t.drawGrid)(r,o.tileSize,1e3,30),(0,n.initBlockSelection)()},971:(e,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.cursorClick=o.initBlockSelection=o.selectedTool=o.selectedBlock=void 0;var t=l(489),n=l(806),c=["brick","white_brick","goal_flag","spawn"];o.selectedBlock="brick",o.selectedTool="blockPlacer";var i=document.getElementById("eraserBtn"),r=document.getElementById("penBtn"),s=document.getElementById("changeBlockLeft"),a=document.getElementById("changeBlockRight"),d=document.getElementById("selectedBlock");function u(e){e.className.includes("selectedTool")||(e.className+=e.className?" selectedTool":"selectedTool","blockPlacer"==o.selectedTool?r.classList.remove("selectedTool"):"eraser"==o.selectedTool&&i.classList.remove("selectedTool"))}o.initBlockSelection=function(){null==i||i.addEventListener("click",(function(){u(i),o.selectedTool="eraser"})),null==r||r.addEventListener("click",(function(){u(r),o.selectedTool="blockPlacer"})),null==s||s.addEventListener("click",(function(){var e=c.indexOf(o.selectedBlock);console.log(e),o.selectedBlock=e-1>=0?c[e-1]:c[c.length-1],d.src="./sprites/".concat(o.selectedBlock,".png")})),null==a||a.addEventListener("click",(function(){var e=c.indexOf(o.selectedBlock);c.length-1>=e+1?o.selectedBlock=c[e+1]:o.selectedBlock=c[0],d.src="./sprites/".concat(o.selectedBlock,".png")}))},o.cursorClick=function(e,l,c){"blockPlacer"==o.selectedTool?(0,t.newBlock)(e,l,c,o.selectedBlock):"eraser"==o.selectedTool&&((0,t.removeBlock)(l,c),(0,n.redrawGird)(e,l,c))}},489:(e,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.drawBlock=o.newBlock=o.removeBlock=o.blocks=o.oneBlocks=void 0;var t=l(304),n=l(806);o.oneBlocks=["goal_flag","spawn"],o.blocks=[];var c=function(e,o,l,t,n){this.x=e,this.y=o,this.type=n};function i(e,l){for(var t=0;t<o.blocks.length;t++)o.blocks[t].x==e&&o.blocks[t].y==l&&o.blocks.splice(t,1)}function r(e,o,l,n){var c=new Image;c.src="./sprites/".concat(n,".png"),c.onload=function(){null==e||e.drawImage(c,o*t.tileSize,l*t.tileSize,t.tileSize,t.tileSize)}}o.removeBlock=i,o.newBlock=function(e,l,t,s){var a;o.oneBlocks.includes(s)&&function(e,l){for(var t=0;t<o.blocks.length;t++)o.blocks[t].type==l&&((0,n.redrawGird)(e,o.blocks[t].x,o.blocks[t].y),o.blocks.splice(t,1))}(e,s);var d=function(e,l){for(var t=0;t<o.blocks.length;t++)if(o.blocks[t].x==e&&o.blocks[t].y==l)return console.log("match!"),{taken:!0,takenBlock:o.blocks[t]};return{taken:!1}}(l,t);d.taken?d.taken&&(null===(a=d.takenBlock)||void 0===a?void 0:a.type)!=s&&(console.log("replace"),i(l,t),o.blocks.push(new c(l,t,1,1,s)),r(e,l,t,s)):(console.log("non att all"),o.blocks.push(new c(l,t,1,1,s)),r(e,l,t,s)),console.log(o.blocks)},o.drawBlock=r},806:(e,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.redrawGird=o.drawGrid=void 0;var t=l(304),n=new Image;n.src="./sprites/grid.png",o.drawGrid=function(e,o,l,t){n.onload=function(){for(var c=0;c<t;c++)for(var i=0;i<l;i++)null==e||e.drawImage(n,i*o,c*o,o,o)}},o.redrawGird=function(e,o,l){null==e||e.clearRect(o*t.tileSize,l*t.tileSize,t.tileSize,t.tileSize),e.drawImage(n,o*t.tileSize,l*t.tileSize,t.tileSize,t.tileSize)}},912:(e,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.initCursor=o.cursor=o.Cursor=void 0;var t=l(304),n=l(971),c=function(e,o){this.x=e,this.y=o};o.Cursor=c,o.cursor=new c(0,0),o.initCursor=function(e,l){e.addEventListener("mousedown",(function(){(0,n.cursorClick)(l,o.cursor.x,o.cursor.y)})),e.addEventListener("mousemove",(function(l){var n,c,i=e.getBoundingClientRect(),r=(n=l.pageX-i.left,c=l.pageY-i.top,{x:Math.ceil(n/t.tileSize)-1,y:Math.ceil(c/t.tileSize)-1});o.cursor.x=r.x,o.cursor.y=r.y}))}},327:(e,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.showMap=o.initJsonMenu=void 0;var t=l(490),n=document.getElementById("DownloadBtn"),c=document.getElementById("jsonSlideContainer"),i=document.getElementById("jsonTextArea"),r=!1;function s(){var e=JSON.stringify(t.map,null,2);i.innerHTML=e,i.select(),navigator.clipboard.writeText(i.innerHTML)}o.initJsonMenu=function(){n.addEventListener("click",(function(){c.style.right=r?"-400px":"0px",(r=!r)&&((0,t.buildMap)(),s())}))},o.showMap=s},490:(e,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.buildMap=o.map=void 0;var t=l(489);o.map={startPoint:{x:0,y:0},goal:{x:0,y:0},blocks:[]},o.buildMap=function(){for(var e=0;e<t.blocks.length;e++)if("spawn"==t.blocks[e].type)o.map.startPoint.x=t.blocks[e].x,o.map.startPoint.y=t.blocks[e].y;else if("goal_flag"==t.blocks[e].type)o.map.goal.x=t.blocks[e].x,o.map.goal.y=t.blocks[e].y;else{var l={x:t.blocks[e].x,y:t.blocks[e].y,type:t.blocks[e].type};o.map.blocks.push(l)}}}},o={};!function l(t){var n=o[t];if(void 0!==n)return n.exports;var c=o[t]={exports:{}};return e[t](c,c.exports,l),c.exports}(304)})();