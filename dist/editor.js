(()=>{"use strict";var e={304:(e,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.tileSize=l.canvas=void 0;var t=o(806),n=o(971);o(912),o(445);var c=o(912),i=o(327);l.canvas=document.getElementById("canvas");var r=l.canvas.getContext("2d");r&&(r.imageSmoothingEnabled=!1);var s=document.getElementById("topBar");document.getElementById("canvasContainer"),l.tileSize=(innerHeight-s.clientHeight)/30,l.canvas.width=1e3*l.tileSize,l.canvas.height=30*l.tileSize,(0,i.initJsonMenu)(),(0,c.initCursor)(l.canvas,r),(0,t.drawGrid)(r,l.tileSize,1e3,30),(0,n.initBlockSelection)()},971:(e,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.cursorClick=l.initBlockSelection=l.selectedTool=l.selectedBlock=void 0;var t=o(489),n=o(806),c=["brick","white_brick","goal_flag","spawn"];l.selectedBlock="brick",l.selectedTool="blockPlacer";var i=document.getElementById("eraserBtn"),r=document.getElementById("penBtn"),s=document.getElementById("changeBlockLeft"),a=document.getElementById("changeBlockRight"),d=document.getElementById("selectedBlock");function u(e){e.className.includes("selectedTool")||(e.className+=e.className?" selectedTool":"selectedTool","blockPlacer"==l.selectedTool?r.classList.remove("selectedTool"):"eraser"==l.selectedTool&&i.classList.remove("selectedTool"))}l.initBlockSelection=function(){null==i||i.addEventListener("click",(function(){u(i),l.selectedTool="eraser"})),null==r||r.addEventListener("click",(function(){u(r),l.selectedTool="blockPlacer"})),null==s||s.addEventListener("click",(function(){var e=c.indexOf(l.selectedBlock);console.log(e),l.selectedBlock=e-1>=0?c[e-1]:c[c.length-1],d.src="./sprites/".concat(l.selectedBlock,".png")})),null==a||a.addEventListener("click",(function(){var e=c.indexOf(l.selectedBlock);c.length-1>=e+1?l.selectedBlock=c[e+1]:l.selectedBlock=c[0],d.src="./sprites/".concat(l.selectedBlock,".png")}))},l.cursorClick=function(e,o,c){"blockPlacer"==l.selectedTool?(0,t.newBlock)(e,o,c,l.selectedBlock):"eraser"==l.selectedTool&&((0,t.removeBlock)(o,c),(0,n.redrawGird)(e,o,c))}},489:(e,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.drawBlock=l.newBlock=l.removeBlock=l.blocks=l.oneBlocks=void 0;var t=o(304),n=o(806);l.oneBlocks=["goal_flag","spawn"],l.blocks=[];var c=function(e,l,o,t,n){this.x=e,this.y=l,this.type=n};function i(e,o){for(var t=0;t<l.blocks.length;t++)l.blocks[t].x==e&&l.blocks[t].y==o&&l.blocks.splice(t,1)}function r(e,l,o,n){var c=new Image;c.src="./sprites/".concat(n,".png"),c.onload=function(){null==e||e.drawImage(c,l*t.tileSize,o*t.tileSize,t.tileSize,t.tileSize)}}l.removeBlock=i,l.newBlock=function(e,o,t,s){var a;l.oneBlocks.includes(s)&&function(e,o){for(var t=0;t<l.blocks.length;t++)l.blocks[t].type==o&&((0,n.redrawGird)(e,l.blocks[t].x,l.blocks[t].y),l.blocks.splice(t,1))}(e,s);var d=function(e,o){for(var t=0;t<l.blocks.length;t++)if(l.blocks[t].x==e&&l.blocks[t].y==o)return console.log("match!"),{taken:!0,takenBlock:l.blocks[t]};return{taken:!1}}(o,t);d.taken?d.taken&&(null===(a=d.takenBlock)||void 0===a?void 0:a.type)!=s&&(console.log("replace"),i(o,t),l.blocks.push(new c(o,t,1,1,s)),r(e,o,t,s)):(console.log("non att all"),l.blocks.push(new c(o,t,1,1,s)),r(e,o,t,s)),console.log(l.blocks)},l.drawBlock=r},806:(e,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.redrawGird=l.drawGrid=void 0;var t=o(304),n=new Image;n.src="./sprites/grid.png",l.drawGrid=function(e,l,o,t){n.onload=function(){for(var c=0;c<t;c++)for(var i=0;i<o;i++)null==e||e.drawImage(n,i*l,c*l,l,l)}},l.redrawGird=function(e,l,o){null==e||e.clearRect(l*t.tileSize,o*t.tileSize,t.tileSize,t.tileSize),e.drawImage(n,l*t.tileSize,o*t.tileSize,t.tileSize,t.tileSize)}},912:(e,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.initCursor=l.cursor=l.Cursor=void 0;var t=o(304),n=o(971),c=function(e,l){this.x=e,this.y=l};l.Cursor=c,l.cursor=new c(0,0),l.initCursor=function(e,o){e.addEventListener("mousedown",(function(){(0,n.cursorClick)(o,l.cursor.x,l.cursor.y)})),e.addEventListener("mousemove",(function(o){var n,c,i=e.getBoundingClientRect(),r=(n=o.pageX-i.left,c=o.pageY-i.top,{x:Math.ceil(n/t.tileSize)-1,y:Math.ceil(c/t.tileSize)-1});l.cursor.x=r.x,l.cursor.y=r.y}))}},327:(e,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.showMap=l.initJsonMenu=void 0;var t=o(490),n=document.getElementById("DownloadBtn"),c=document.getElementById("jsonSlideContainer"),i=document.getElementById("jsonTextArea"),r=!1;function s(){var e=JSON.stringify(t.map,null,2);i.innerHTML=e,i.select(),navigator.clipboard.writeText(i.innerHTML)}l.initJsonMenu=function(){n.addEventListener("click",(function(){c.style.right=r?"-400px":"0px",(r=!r)&&((0,t.buildMap)(),s())}))},l.showMap=s},490:(e,l,o)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.buildMap=l.map=void 0;var t=o(489);l.map={madeBy:"none",description:"none",levelBuild:{startPoint:{x:0,y:0},goal:{x:0,y:0},blocks:[]}},l.buildMap=function(){for(var e=0;e<t.blocks.length;e++)if("spawn"==t.blocks[e].type)l.map.levelBuild.startPoint.x=t.blocks[e].x,l.map.levelBuild.startPoint.y=t.blocks[e].y;else if("goal_flag"==t.blocks[e].type)l.map.levelBuild.goal.x=t.blocks[e].x,l.map.levelBuild.goal.y=t.blocks[e].y;else{var o={x:t.blocks[e].x,y:t.blocks[e].y,type:t.blocks[e].type};l.map.levelBuild.blocks.push(o)}}},445:()=>{var e=document.getElementById("returnBtn");null==e||e.addEventListener("click",(function(){window.location.href="index.html"}))}},l={};!function o(t){var n=l[t];if(void 0!==n)return n.exports;var c=l[t]={exports:{}};return e[t](c,c.exports,o),c.exports}(304)})();